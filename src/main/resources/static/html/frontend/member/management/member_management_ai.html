<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœƒå“¡ä¸­å¿ƒ | PetGuardian</title>
    <link rel="stylesheet" href="../../../../css/frontend/style.css">
    <link rel="stylesheet" href="../../../../css/frontend/components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../../../css/frontend/dashboard.css">
    <style>
        /* é¡å¤–çš„æ¨£å¼èª¿æ•´  */
        .profile-avatar-section {
            text-align: center;
            margin-bottom: 2rem;
        }

        .profile-avatar-wrapper {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 1rem;
        }

        .profile-avatar {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--secondary-color);
        }

        .avatar-upload-btn {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 36px;
            height: 36px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }

        .avatar-upload-btn:hover {
            background: var(--primary-hover);
            transform: scale(1.1);
        }

        .avatar-upload-btn i {
            color: white;
            font-size: 0.9rem;
        }

        .mem_image {
            display: none;
        }

        /* .show_image {
            display: none;
        } */

        .form-helper-text {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-top: 0.25rem;
            display: block;
        }

        .form-section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
            margin: 1.5rem 0 1rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--secondary-color);
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .btn-reset {
            background-color: #e9ecef;
            color: var(--text-color);
        }

        .btn-reset:hover {
            background-color: #dee2e6;
        }

        .footer-links {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
        }

        .deactivate-link {
            color: var(--danger);
            font-weight: 500;
            transition: var(--transition);
        }

        .deactivate-link:hover {
            color: #c41e2a;
            text-decoration: underline;
        }

        .required-note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 0.75rem 1rem;
            margin-bottom: 1.5rem;
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
        }

        .required-note .mustbe {
            color: var(--danger);
            font-weight: 600;
        }

        .show_image {
            border: 3px solid #dfb590;
            width: 100px;
            height: 100px;
            border-radius: 50px;
            overflow: hidden;
        }
    </style>
</head>

<body>

    <header id="main-header" class="header"></header>

    <div class="container dashboard-container">
        <!-- Sidebar  -->
        <div class="sidebar">
            <div class="text-center mb-2">
                <div class="avatar-wrapper">
                    <img src="https://cdn01.pinkoi.com/product/aZgvB9di/3/640x530.jpg" class="avatar">
                </div>
                <h4>æœƒå“¡ä¸­å¿ƒ</h4>
                <p style="color: #999; font-size: 0.9rem;">ä¸€èˆ¬æœƒå“¡</p>
            </div>
            <nav>
                <a href="/html/frontend/member/management/member_management_ai.html" class="menu-item"
                    th:classappend="${activePage == 'profile'} ? ' active' : ''">
                    <i class="fas fa-user"></i> å€‹äººè³‡æ–™
                </a>
                <a href="/pet/dashboard" class="menu-item" th:classappend="${activePage == 'pets'} ? ' active' : ''">
                    <i class="fas fa-paw"></i> æˆ‘çš„å¯µç‰©
                </a>
                <a href="/dashboard/orders" class="menu-item"
                    th:classappend="${activePage == 'orders'} ? ' active' : ''">
                    <i class="fas fa-receipt"></i> å•†åŸè¨‚å–®ç´€éŒ„
                </a>
                <a href="/booking/memberOrders" class="menu-item"
                    th:classappend="${activePage == 'bookings'} ? ' active' : ''">
                    <i class="fas fa-calendar-check"></i> ä¿æ¯é ç´„ç´€éŒ„
                </a>
                <a href="/dashboard/favorites" class="menu-item"
                    th:classappend="${activePage == 'favorites'} ? ' active' : ''">
                    <i class="fas fa-heart"></i> æ”¶è—åˆ—è¡¨
                </a>
                <a href="/sitter/apply" class="menu-item"
                    th:classappend="${activePage == 'sitter-registration'} ? ' active' : ''"
                    style="border-top: 1px solid #eee; margin-top: 0.5rem; padding-top: 0.5rem;">
                    <i class="fas fa-user-plus"></i> æˆç‚ºä¿æ¯
                </a>
                <div class="menu-item" style="color: var(--danger); cursor: pointer;"
                    onclick="alert('å·²ç™»å‡º'); window.location.href='index.html'">
                    <i class="fas fa-sign-out-alt"></i> ç™»å‡º
                </div>
            </nav>
        </div>

        <!-- Main Content  -->
        <div class="main-content">
            <!-- Profile Section  -->
            <div id="profile">
                <h2 class="mb-2">æœƒå“¡å€‹äººè³‡æ–™ç®¡ç†</h2>

                <div class="card">
                    <div class="required-note">
                        <span class="mustbe">*</span> æ¨™ç¤ºç‚ºå¿…å¡«æ¬„ä½
                    </div>

                    <form>
                        <!-- æœƒå“¡é ­åƒä¸Šå‚³å€  -->
                        <div class="profile-avatar-section">
                            <div class="profile-avatar-wrapper">
                                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQRQi96OxjX_SJ_bjPCr8AoSME7aR3H47S7Gw&s"
                                    class="profile-avatar" id="avatarPreview">
                                <label for="avatarUpload" class="avatar-upload-btn">
                                    <i class="fas fa-camera"></i>
                                </label>
                                <input type="file" class="mem_image" id="avatarUpload" accept="image/*">
                            </div>
                            <p style="color: var(--text-light); font-size: 0.9rem;">é»æ“Šç›¸æ©Ÿåœ–æ¨™ä¸Šå‚³æœƒå“¡é ­åƒ</p>
                        </div>

                        <!-- åŸºæœ¬è³‡æ–™  -->

                        <div class="form-section-title">
                            <i class="fas fa-id-card"></i> æœƒå“¡é ­åƒ
                        </div>


                        <!--  -->

                        <div class="profile-form-grid">
                            <div class="form-group">
                                <label class="form-label">
                                    ğŸ¾ è®Šæ›´å¾Œæœƒå“¡é ­åƒ
                                </label>
                            </div>
                        </div>
                        <!--  -->
                        <div class="show_image"></div><!--æœƒå“¡é ­åƒæ”¾åœ¨é€™è£¡-->

                        <div class="form-section-title">
                            <i class="fas fa-id-card"></i> åŸºæœ¬è³‡æ–™
                        </div>

                        <div class="profile-form-grid">
                            <div class="form-group">
                                <label class="form-label">
                                    <span class="mustbe">*</span> å§“å
                                </label>
                                <input type="text" class="form-control mem_name" placeholder="è«‹è¼¸å…¥ä½¿ç”¨è€…å§“å" required>
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <span class="mustbe">*</span> å¸³è™Ÿ
                                </label>
                                <input type="text" class="form-control mem_acc" placeholder="è«‹è¼¸å…¥ä½¿ç”¨è€…å¸³è™Ÿ" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <span class="mustbe">*</span> å¯†ç¢¼
                            </label>
                            <div style="display: flex; gap: 1rem; align-items: center;">
                                <input type="password" class="form-control mem_pw" placeholder="********" disabled
                                    style="flex: 1;">
                                <a href="./member_management_resetpw.html" class="btn btn-outline"
                                    style="white-space: nowrap; padding: 0.6rem 1.2rem;">
                                    <i class="fas fa-key"></i> è®Šæ›´å¯†ç¢¼
                                </a>
                            </div>
                        </div>

                        <div class="profile-form-grid">
                            <div class="form-group">
                                <label class="form-label">èº«åˆ†è­‰å­—è™Ÿ</label>
                                <input type="text" class="form-control mem_uid" placeholder="è«‹è¼¸å…¥èº«åˆ†è­‰å­—è™Ÿ">
                                <span class="form-helper-text rightword">
                                    <i class="fas fa-info-circle"></i> ç¯„ä¾‹ï¼šA123456789
                                </span>
                            </div>

                            <div class="form-group">
                                <label class="form-label">ç”Ÿæ—¥</label>
                                <input type="date" class="form-control mem_bth">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">æ€§åˆ¥</label>
                            <select class="form-control mem_sex">
                                <option value="2">æœªé¸æ“‡</option>
                                <option value="1">ç”·</option>
                                <option value="0">å¥³</option>
                            </select>
                        </div>

                        <!-- è¯çµ¡è³‡è¨Š  -->
                        <div class="form-section-title">
                            <i class="fas fa-address-book"></i> è¯çµ¡è³‡è¨Š
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <span class="mustbe">*</span> é›»å­ä¿¡ç®±
                            </label>
                            <input type="email" class="form-control mem_email" placeholder="è«‹è¼¸å…¥ä½¿ç”¨è€…é›»å­ä¿¡ç®±" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">æ‰‹æ©Ÿè™Ÿç¢¼</label>
                            <input type="tel" class="form-control mem_tel" placeholder="è«‹è¼¸å…¥ä½¿ç”¨è€…æ‰‹æ©Ÿè™Ÿç¢¼">
                            <span class="form-helper-text rightword">
                                <i class="fas fa-info-circle"></i> ç¯„ä¾‹ï¼š0912345678
                            </span>
                        </div>

                        <div class="form-group">
                            <label class="form-label">åœ°å€</label>
                            <input type="text" class="form-control mem_add" placeholder="è«‹è¼¸å…¥ä½¿ç”¨è€…åœ°å€">
                            <span class="form-helper-text rightword">
                                <i class="fas fa-info-circle"></i> èªªæ˜ï¼šåœ°å€å«éƒµéå€è™Ÿã€ç¸£å¸‚ã€è¡Œæ”¿å€ã€è¡—é“ã€å··å¼„ã€é–€è™Ÿã€æ¨“å±¤
                            </span>
                        </div>

                        <!-- è²¡å‹™è³‡è¨Š  -->
                        <div class="form-section-title">
                            <i class="fas fa-wallet"></i> è²¡å‹™è³‡è¨Š
                        </div>

                        <div class="form-group">
                            <label class="form-label">éŠ€è¡Œå¸³è™Ÿ</label>
                            <input type="text" class="form-control mem_account_number" placeholder="è«‹è¼¸å…¥ä½¿ç”¨è€…éŠ€è¡Œå¸³è™Ÿ">
                            <span class="form-helper-text rightword">
                                <i class="fas fa-info-circle"></i> ç¯„ä¾‹ï¼š123456789012
                            </span>
                        </div>

                        <!-- æŒ‰éˆ•çµ„  -->
                        <div class="btn-group">
                            <button type="submit" class="btn btn-primary submit">
                                <i class="fas fa-save"></i> å„²å­˜è®Šæ›´
                            </button>
                            <button type="reset" class="btn btn-reset">
                                <i class="fas fa-redo"></i> æ¸…é™¤é‡å¡«
                            </button>
                        </div>
                    </form>

                    <!-- é å°¾é€£çµ  -->
                    <div class="footer-links">
                        <!-- <a href="/" class="btn btn-outline">
                            <i href="/" class="fas fa-home"></i> è¿”å›é¦–é 
                        </a> -->
                        <a href="./member_management_deactivate.html" class="deactivate-link deactivate">
                            <i class="fas fa-user-slash"></i> åœç”¨å¸³è™Ÿ
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer id="main-footer" style="margin-top: 4rem;"></footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../../../../js/frontend/main.js"></script>
    <script>


        function init() {

            function update(e) {

                e.preventDefault();

                let memImage = $(".mem_image")[0].files[0]
                let memName = $(".mem_name").val();
                let memAcc = $(".mem_acc").val();
                let memUid = $(".mem_uid").val();
                let memBth = $(".mem_bth").val();
                let memSex = $(".mem_sex").val();
                let memEmail = $(".mem_email").val();
                let memTel = $(".mem_tel").val();
                let memAdd = $(".mem_add").val();
                let memAccountNumber = $(".mem_account_number").val();

                let formData = new FormData();

                formData.append("memImage", memImage)
                formData.append("memName", memName)
                formData.append("memAcc", memAcc)
                formData.append("memUid", memUid)
                formData.append("memBth", memBth)
                formData.append("memSex", memSex)
                formData.append("memEmail", memEmail)
                formData.append("memTel", memTel)
                formData.append("memAdd", memAdd)
                formData.append("memAccountNumber", memAccountNumber)

                fetch("http://localhost:8080/front/management", {
                    method: "PUT",
                    credentials: "include",
                    body: formData         //FormData æ˜¯ç€è¦½å™¨æä¾›çš„ã€Œè¡¨å–®è³‡æ–™ç‰©ä»¶ã€,ç€è¦½å™¨æœƒè‡ªå‹•Content-Type: multipart/form-data
                }).then(res => res.json()).then(data => {
                    console.log(data);
                    $(".show_image").append(`<img src="${data.memImage}" style="width: 200px;">`);
                    alert("è®Šæ›´æˆåŠŸ");
                });

            }

            $(".submit").on("click", update);

        };

        $(window).on("load", init);

    </script>

    <!-- é ­åƒé è¦½åŠŸèƒ½  -->
    <script>
        document.getElementById('avatarUpload').addEventListener('change', function (e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (event) {
                    document.getElementById('avatarPreview').src = event.target.result;
                };
                reader.readAsDataURL(file);
            }
        });
    </script>

</body>

</html>