<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pet Guardian - 停用會員帳號</title>

  <style>
    * {
      box-sizing: border-box;
    }

    .middle {
      text-align: center;
    }

    .title {
      color: brown;
    }

    .rightone {
      text-align: right;
    }
  </style>

</head>

<body>

  <div class="middle">
    <h1 class="title">Petguardian寵護家</h1>
    <h3 class="title">停用您的會員帳號</h3>
  </div>
  <span>以下內容攸關您的權益，請務必仔細閱讀：</span><br>
  <span>您正在嘗試停用自己的會員帳號，</span><br>
  <span>由於該帳號提供了各種服務的使用權限，</span><br>
  <span>一旦將它停用，您就無法再使用這些服務，您的帳號和當中的資料也會永久封存。</span><br><br>
  <input class="sure" type="checkbox">
  <span>是，我想永久停用這個會員帳號和封存當中的所有資料。</span><br><br>
  <button type="button" class="button" disabled>停用帳號</button>
  <div class="rightone">
    <a href="#">返回前頁</a><br><br>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>

    function init() {

      function check() {

        if ($(".sure").prop("checked")) {
          $(".button").prop("disabled", false)
        } else if (!$(".sure").prop("checked")) {
          $(".button").prop("disabled", true)
        }
      }

      $(".sure").on("change", check)

      function deactivate() {

        var fetch_url = "http://localhost:8080/front/deactivate";

        fetch(fetch_url, {
          method: "PUT",
          credentials: "include"
        }).then(res => res.json()).then(data => {
          console.log(data.status);
          document.write("停用成功");
        });

      }

      $(".button").on("click", deactivate);

    }

    $(window).on("load", init);

  </script>
</body>

</html>